<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>filesystem-update-description</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 10:21:49 +0000 oemId: 1 -->
<h1>filesystem-update-description</h1>
<p>Refresh Span Manager&#39;s copy of several FS characteristics for an fs</p>
<h1>Syntax</h1>
<pre>filesystem-update-description &lt;filesystems-see-&#39;man fs-spec&#39;&gt;
</pre>

<h1>Description</h1>
<p>This is a troubleshooting command, intended for use by your support provider.</p>
<p>The Filesystem provides Span Manager with several filesystem details, which it stores in Cod:</p>
<ul>
<li>A Worm flag</li>
<li>The WFS version</li>
<li>The number of DSBs</li>
<li>The cluster ('file system block') size</li>
</ul>
<p>Span Manager uses the Worm flag to prevent deletion of Worm filesystems.  The remaining fields -- WFS version, DSB count and cluster size -- are merely redundant copies of essential information.</p>
<p>The Filesystem provides these details when it formats a filesystem.  If, at that time, Span Manager can't write to Cod -- after a Cod I/O error, for example -- it's possible for Span Manager's copy of these details to become out of date.  That might, for example, make it possible to delete a Worm filesystem, or impossible to delete a non-strict Worm filesystem that had been reformatted as non-Worm.</p>
<p>The 'filesystem-update-description' command asks the Filesystem for these filesystem details again and, if necessary, updates its own copy of them.</p>
<p>You can use the flexible syntax described in the 'fs-spec' command to specify several file systems in a single command.</p>
<h1>Examples</h1>
<pre>To update the description of a single file system:
</pre>
<p></p>
<pre>cluster1:$ filesystem-update-description Accounts
The FSM reports:
Worm?        No
WFS version: 1
DSB count:   0
Clustersize: 4KiB
</pre>
<p></p>
<pre>Successfully updated Span Manager
cluster1:$
</pre>
<p></p>
<p>To update the descriptions of all file systems on a span, or (in this case) to verify that they are all up to date:</p>
<pre>server:$ filesystem-update-description SomeSpan
</pre>
<p></p>
<pre>Filesystem Alpha:
The FSM reports:
Worm?        No
WFS version: 2
DSB count:   128
Clustersize: 32KiB
</pre>
<p></p>
<pre>No change is needed: Span Manager is already up to date
</pre>
<p></p>
<pre>Filesystem Bravo:
The FSM reports:
Worm?        No
WFS version: 2
DSB count:   128
Clustersize: 4KiB
</pre>
<p></p>
<pre>No change is needed: Span Manager is already up to date
</pre>
<p></p>
<pre>Filesystem Charlie:
The FSM reports:
Worm?        No
WFS version: 2
DSB count:   128
Clustersize: 4KiB
</pre>
<p></p>
<pre>No change is needed: Span Manager is already up to date
server:$
</pre>
<p></p>
<h1>Applies To</h1>
<p>Cluster wide</p>
<h1>See Also</h1>
<p><a href="../Topic/cod.html">cod</a> <a href="../Supervisor/filesystem-delete.html">filesystem-delete</a> <a href="../User/filesystem-list.html">filesystem-list</a> <a href="../Supervisor/fs-spec.html">fs-spec</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
