<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>ipeng-zwp-limit-aggressive</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 10:21:49 +0000 oemId: 1 -->
<h1>ipeng-zwp-limit-aggressive</h1>
<p>Set current zero window probe limit for when buffers are plentiful.</p>
<h1>Syntax</h1>
<pre>ipeng-zwp-limit-aggressive [&lt;value&gt;]
</pre>

<h1>Description</h1>
<p>The ipeng-zwp-limit-* commands control a feature called the "Zero Window Probe Connection Killer" which is aimed at helping a specific performance issue.</p>
<p>Only use under instruction from your support provider.</p>
<p>As part of TCP connection a client sends the server a "window size" saying how much data it can currently take from the server. The client may close the window on its TCP connection stopping the server from being able to send further data until the window re-opens. If the window is closed, probes are sent to the client on a regular basis to see if the window has opened yet to allow data to flow again.</p>
<p>This feature kills TCP connections which have closed their window, and then failed to open their window again after a number of zero window probes.</p>
<p>This feature is not usually necessary, and is in normal mode by default as that is not expected to have any negative impact on performance.</p>
<p>The commands available are as follows.</p>
<dl>
<dt><strong>ipeng-zwp-limit-set-defaults</strong></dt>
<dd><p>Reset all the ipeng-zwp-limit-* options to their default values.</p></dd>
<dd><p>mode = normal, normal limit = 6, aggressive limit = 6.</p></dd>
<dt><strong>ipeng-zwp-limit-mode [disable|normal|aggressive]</strong></dt>
<dd><p>Sets which zero window probe limits, if any, are currently in use by the TCP connection killer. If no value is given, then the current settings are displayed.</p></dd>
<dd><p>Modes available are:</p></dd>
<dl>
<dt><strong>disable</strong></dt>
<dd><p>TCP connections are never killed by the zero window probe killer.</p></dd>
<dt><strong>normal</strong></dt>
<dd><p>The TCP connection is only killed if the server is running out of free transmit buffers, and the client fails to respond to the set level of zero window probes. This isn't generally expected to happen, and hence shouldn't have any negative impact on typical workloads.</p></dd>
<dt><strong>aggressive</strong></dt>
<dd><p>As well as the limit used in the normal mode, a second limit is introduced which is active in the typical case where there are still plenty of buffers available. This allows a connection to be killed long before the server runs out of buffers, however there is a chance that perfectly valid connections could be terminated in this mode which could degrade performance.</p></dd>
</dl>
<dt><strong>ipeng-zwp-limit-normal &lt;number&gt;</strong></dt>
<dd><p>This limit is active in both normal and aggressive mode.</p></dd>
<dd><p>Set the limit for how many zero window probes will be sent before the TCP connection is terminated when transmit buffers are limited. Value can be 0 to 31.</p></dd>
<dt><strong>ipeng-zwp-limit-aggressive &lt;number&gt;</strong></dt>
<dd><p>Only has any effect in aggressive mode.</p></dd>
<dd><p>Sets the limit for how many zero window probes will be sent before the TCP connection is terminated when plenty of buffers are available. Value can be 0 to 31.</p></dd>
</dl>
<h1>Examples</h1>
<p>Turn the zero window probe TCP connection killer up to aggressive setting, and then set the normal limit such that when buffer space is tight we reclaim potentially broken connections even faster.</p>
<pre>    $ ipeng-zwp-limit-mode aggressive
    $ ipeng-zwp-limit-normal 3
</pre>
<p></p>
<p>To set the feature back to the safe default level.</p>
<pre>    $ ipeng-zwp-limit-set-defaults
</pre>
<p></p>
<h1>Applies To</h1>
<p>Cluster wide</p>
<h1>See Also</h1>
<p><a href="../Supervisor/ipeng.html">ipeng</a> <a href="../Supervisor/ipeng-tx-buffer-limit.html">ipeng-tx-buffer-limit</a> <a href="../Supervisor/ipeng-zwp-limit-mode.html">ipeng-zwp-limit-mode</a> <a href="../Supervisor/ipeng-zwp-limit-normal.html">ipeng-zwp-limit-normal</a> <a href="../Supervisor/ipeng-zwp-limit-set-defaults.html">ipeng-zwp-limit-set-defaults</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
