<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>local-password-list</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 10:21:49 +0000 oemId: 1 -->
<h1>local-password-list</h1>
<p>Lists all users with local authentication configured</p>
<h1>Syntax</h1>
<pre>local-password-list 
</pre>

<h1>Description</h1>
<p>The local-password- commands manage a local password table currently used to service FTP connections and NTLMSSP authentications without a domain controller. It bears no relation to the accounts used to log in to the server console with ssc or ssh.</p>
<dl>
<dt><strong>local-password-set &lt;user-specifier&gt; [&lt;password&gt;]</strong></dt>
<dd><p>For interoperability with CIFS on Windows, the user should be specified as &lt;domain&gt;\&lt;user name&gt; and encoded in UTF-8. The domain, user name and password given on the client must all match the case configured on the server. A common convention writes Windows domains in ALL-CAPS. The password can be entered interactively, to prevent its appearance in logs.</p></dd>
<dt><strong>local-password-delete &lt;user-specifier&gt;</strong></dt>
<dd><p>Removes the specified user's entry in the password table. No error is produced if the user has no entry.</p></dd>
<dt><strong>local-password-delete-all --confirm</strong></dt>
<dd><p>Confirmation is required before irretrievably destroying the password table.</p></dd>
<dt><strong>local-password-list</strong></dt>
<dd><p>Passwords are not stored and hence cannot be displayed, but up to four stored hashes may be shown. The hashes are calculated using a variety of one-way functions; they do not permit retrieval of the original password. Possible hashes are: NTOWF_V1, LMOWF_V1, NTOWF_V2 and LMOWF_V2, with the set shown dependent on your configuration.</p></dd>
</dl>
<p>The configuration is persistent. Unlike the related localgroup and the primary-group features, this table has no delayed batch saving.</p>
<p>A regular user would have a security identifier (SID) which is used to specify the owner of files created by that user. A regular user would also have a primary group SID, used to give a group to files created by that user. Typically, a user would also be a member of one or more other groups. All of this information can be configured with user-mappings-add, localgroup and primary-group-set.</p>
<p>If an "--nt-id" (a SID) is not specified with user-mappings-add, then a NTLMSSP user will be able to authenticate but will be treated as the anonymous user. No amount of user-mappings-refresh or credentials-reassess calls will then rectify that. The mapping must be configured before the user connects, otherwise it won't take effect until the user is disconnected. net use /d sometimes works to disconnect a user. Microsoft Management Console, connection --delete and rebooting the client are all more reliable.</p>
<p>Regular user and group SIDs are intended to be unique, worldwide. Windows achieves this by concatenating a small, incrementing integer, a "RID", identifying the user within the domain with a long, statistically unique, domain SID. A Windows domain SID takes a numeric form of S-1-5-21-&lt;c1&gt;-&lt;c2&gt;-&lt;c3&gt; where c1, c2 and c3 are 32 bit decimal integers. The RID is a further single 32 bit decimal integer component.</p>
<p>No programmatic assistance is provided for allocating the domain SID or RIDs. Instead, we recommend that the first local user be given the SID S-1-81-0, with the second user becoming S-1-81-1 and so on. This gives a range of over 4 billion user ids. We recommend that the first locally allocated group be given the SID S-1-82-0, with the second group becoming S-1-82-1 and so on.</p>
<h1>Examples</h1>
<pre>$ local-password-set COMPANY\user password
$ local-password-list
COMPANY\user
$ local-password-delete COMPANY\user
$ local-password-delete-all
Syntax: local-password-delete-all --confirm
$
</pre>
<p></p>
<p>Consider a case where two local users are to be created for CIFS access:</p>
<pre>$ local-password-set DOMAIN\ro ro
$ local-password-set DOMAIN\rw rw
$ user-mappings-add --nt-name DOMAIN\ro --nt-id S-1-81-0
$ user-mappings-add --nt-name DOMAIN\rw --nt-id S-1-81-1
$ group-mappings-add --nt-name DOMAIN\group --nt-id S-1-82-0
$ user-mappings-commit
$ group-mappings-commit
$
</pre>
<p></p>
<p>Giving the users equivalent Unix identification improves NFS performance:</p>
<pre>$ user-mappings-modify --nt-name DOMAIN\ro --set-unix-name ro --set-unix-id 1024
$ user-mappings-modify --nt-name DOMAIN\rw --set-unix-name rw --set-unix-id 1025
$ group-mappings-modify --nt-name DOMAIN\group --set-unix-name group --set-unix-id 1024
$ user-mappings-commit
$ group-mappings-commit
$
</pre>
<p></p>
<p>A typical setup might have the "rw" user grant a Unix mode of rw-r-----, to share read-only access with "ro":</p>
<pre>$ primary-group-set DOMAIN\ro DOMAIN\group
$ primary-group-set DOMAIN\rw DOMAIN\group
$ localgroup set DOMAIN\group DOMAIN\ro DOMAIN\rw
$ mkdir dir
$ chown 1025 dir
$ chgrp 1024 dir
$ chmod g-w dir
$ chmod o-rwx dir
$ ls -ld dir
$
</pre>
<p></p>
<p>The group changes will take effect even on existing connections, a background process that can be hastened with:</p>
<pre>$ credentials-reassess
$
</pre>
<p></p>
<p>The effect can be checked by inspected the currently connected credentials with:</p>
<pre>$ connection -v all
$
</pre>
<p></p>
<p>The Windows "net use" command appears unwilling to accept an empty or missing domain argument to the /user switch. The "DOMAIN\" prefix on all the above NT names can, however, be omitted, when using a client such as jCIFS, in which case the configured user name should not start with a backslash. To configure so that Windows can use the same user-mapping as jCIFS:</p>
<pre>$ set should-canonicalize-local-authentication-domain true
$
</pre>
<p></p>
<p>The default canonical domain is the empty string. To use that, omit the domain in both local-password-set and user-mappings-add commands. To use a different domain, for example "DOMAIN":</p>
<pre>$ set canonical-local-authentication-domain DOMAIN
$
</pre>
<p></p>
<p>The password hash generated by the legacy LAN Manager (LanMan) one-way function (LMOWF_V1) is not regarded as robust by modern cryptography standards. By default, calculation of the LMOWF_V1 hash is disabled, with the consequence that legacy LanMan authentication is not possible. Note that this is unlikely to affect most users.</p>
<p>Legacy LAN Manager authentication can be enabled with:</p>
<pre>$ set lm-authentication-allowed true
$
</pre>
<p></p>
<p>However, LMOWF_V1 hash calculation must also be enabled and each user password reset to trigger the calculation:</p>
<pre>$ set disabledLocalPasswordHashes ""
$ local-password-set COMPANY\user password
$
</pre>
<p></p>
<p>Passwords may also be encoded using a two-way function.  Whilst passwords encoded this way are not stored as plain text, a skilled attacker could reverse the two-way function to obtain the original input. Consequently, it is recommended to disable the two-way function in version 12.3 and later using:</p>
<pre>$ set shouldKeepObfuscatedLocalPasswords false
$
</pre>
<p></p>
<p>Note that you should only use this command once you are sure you do not wish to downgrade past 12.3; software versions prior to 12.3 do not support one-way hashes and rely on the two-way function encoding to authenticate local users.  Disabling the two-way function and downgrading will result in local users being unable to authenticate unless their passwords are reset.</p>
<h1>Applies To</h1>
<p>Current EVS security context</p>
<h1>See Also</h1>
<p><a href="../Supervisor/credentials-reassess.html">credentials-reassess</a> <a href="../Supervisor/group-mappings-add.html">group-mappings-add</a> <a href="../Supervisor/group-mappings-commit.html">group-mappings-commit</a> <a href="../Supervisor/group-mappings-modify.html">group-mappings-modify</a> <a href="../Supervisor/local-password-delete.html">local-password-delete</a> <a href="../Supervisor/local-password-delete-all.html">local-password-delete-all</a> <a href="../Supervisor/local-password-set.html">local-password-set</a> <a href="../User/localgroup.html">localgroup</a> <a href="../Supervisor/primary-group-delete.html">primary-group-delete</a> <a href="../Supervisor/primary-group-delete-all.html">primary-group-delete-all</a> <a href="../Supervisor/primary-group-disable-saving.html">primary-group-disable-saving</a> <a href="../User/primary-group-list.html">primary-group-list</a> <a href="../Supervisor/primary-group-save.html">primary-group-save</a> <a href="../Supervisor/primary-group-set.html">primary-group-set</a> <a href="../Supervisor/set.html">set</a> <a href="../Supervisor/user-mappings-add.html">user-mappings-add</a> <a href="../Supervisor/user-mappings-commit.html">user-mappings-commit</a> <a href="../Supervisor/user-mappings-modify.html">user-mappings-modify</a> <a href="../Supervisor/user-mappings-refresh.html">user-mappings-refresh</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
