<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>filesystem-dwb</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 12:50:50 +0000 oemId: 1 -->
<h1>filesystem-dwb</h1>
<p>Enable or disable dynamic write balancing for a filesystem</p>
<h1>Syntax</h1>
<pre>filesystem-dwb &lt;filesystems-see-&#39;man fs-spec&#39;&gt; (off|on)
</pre>

<h1>Description</h1>
<p>Enables or disables DWB for a set of file systems.</p>
<p>A span is composed of one or more stripesets, which in turn are made up of system drives (SDs).  Creating a span creates one stripeset; expanding a span adds one further stripeset.</p>
<p>Each filesystem is hosted on a certain set of SDs -- usually, all the SDs in the span that hosts the filesystem.  By default, the server writes to all these SDs at once.  This technique is known as dynamic write balancing, or DWB.  By writing to as many disks and Raid controllers as possible, it optimizes performance.</p>
<p>If DWB is disabled, the server reverts to the algorithm used in previous releases, in which (for each file system) it writes to only one stripeset at once.  Depending on the physical characteristics of the storage and whether SD groups have been created (on the rare occasions where the 'sd-group' man page says they are necessary), the old algorithm may yield higher performance.</p>
<p>In most circumstances, however, the best way to optimize performance is to leave DWB enabled and either use HDP or use parity groups that contain exactly one SD each.</p>
<p>'filesystem-dwb' cannot be run while the file system is mounted or is being checked or fixed.</p>
<p>A span does not support DWB if it contains more than 255 units, where each SD group and each ungrouped SD counts as one unit.</p>
<p>In this case, it can be helpful to artificially combine some SD groups (trying to keep their sizes as even as possible) in order to get below the limit of 255 units and so enable DWB.</p>
<p>A span is also ineligible for DWB if any of its stripesets has only one SD and that stripeset's capacity is not a multiple of 4MiB.  Current software releases do not create such spans; earlier releases did.</p>
<p>'span-list --verbose' shows whether a span supports DWB or not.</p>
<p>'filesystem-list --verbose' shows whether a file system uses DWB and, if not, why not.</p>
<p>'sd-group-list --show-count &lt;span-or-filesystem-instance-name&gt;' shows how many SD groups are used by a span.</p>
<p>'sd-list &lt;span-or-filesystem-instance-name&gt;:ungrouped' shows how many SDs in a span are ungrouped.</p>
<p>'filesystem-dwb' lets you manipulate any number of file systems, using the flexible syntax described in the 'fs-spec' man page.  However, since the word 'on' or 'off' follows the file system names on the command line, those names must be separated with slashes, not spaces.</p>
<h1>Examples</h1>
<pre>filesystem-dwb Accounts on
filesystem-dwb Accounts/Engineering/Marketing on
filesystem-dwb all:unmounted on
</pre>
<p></p>
<h1>Applies To</h1>
<p>Cluster wide</p>
<h1>See Also</h1>
<p><a href="../User/filesystem-list.html">filesystem-list</a> <a href="../Supervisor/fs-spec.html">fs-spec</a> <a href="../Topic/sd-group.html">sd-group</a> <a href="../User/sd-group-list.html">sd-group-list</a> <a href="../User/sd-list.html">sd-list</a> <a href="../User/span-list.html">span-list</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
