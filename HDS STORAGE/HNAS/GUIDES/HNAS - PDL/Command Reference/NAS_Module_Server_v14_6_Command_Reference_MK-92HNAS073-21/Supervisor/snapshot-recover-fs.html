<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>snapshot-recover-fs</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 12:50:50 +0000 oemId: 1 -->
<h1>snapshot-recover-fs</h1>
<p>Recover a file system from a snapshot.</p>
<h1>Syntax</h1>
<pre>snapshot-recover-fs [--undo] --file-system &lt;file-system&gt; [--confirm] [&lt;snapshot-name&gt;]
</pre>

<h1>Description</h1>
<p>This command returns the specified WFS-2 file system to its state in the specified snapshot. All changes made to the file system since the snapshot was taken will be lost. File system recover CANNOT be undone once the file system is mounted read/write.</p>
<p>If the snapshot is sufficiently recent, fs-checkpoint-select is performed. fs-checkpoint-select is reversible and does not delete existing snapshots.</p>
<p>The file system needs to be unmounted for this operation.</p>
<p>Note: If file system expansion has occurred since the snapshot was taken then although 'df' and 'query' will show the previous size of the file system, the underlying partition (as displayed by 'filesystem-list') will continue to report the post-expansion size until the file system is mounted r/w when, if necessary, it will be shrunk to match the file system size.</p>
<dl>
<dt><strong>--undo</strong></dt>
<dd><p>Undo the last snapshot recover operation if the file system has not been mounted read/write since.</p></dd>
<dt><strong>--file-system &lt;file-system&gt;</strong></dt>
<dd><p>Select the file system by label.</p></dd>
<dt><strong>--confirm</strong></dt>
<dd><p>Don't ask for confirmation.</p></dd>
<dt><strong>&lt;snapshot-name&gt;</strong></dt>
<dd><p>Select the snapshot by name.</p></dd>
</dl>
<p>Failure conditions:</p>
<ul>
<li>SnapshotConfigInvalid or "The snapshot configuration is invalid"</li>
<p>The snapshots on the file system could not be loaded at mount-time, and are considered corrupt.</p>
<p>Resolution: Run kill-snapshots or fixfs. Both require the file system to be unmounted, and will erase all current snapshots on the file system.</p>
</ul>
<h1>Examples</h1>
<pre>server:$ snapshot-recover-fs --file-system fs1 --confirm snap1
 Information: File system "fs1" was recovered from snapshot "snap1"
</pre>
<p></p>
<p>Irretrievably returns file system fs1 to its state in snapshot snap1.</p>
<h1>Applies To</h1>
<p>EVS</p>
<h1>See Also</h1>
<p><a href="../Supervisor/fs-checkpoint-select.html">fs-checkpoint-select</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
