<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>kill-snapshots</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 10:20:39 +0000 oemId: 1 -->
<h1>kill-snapshots</h1>
<p>Removes all snapshots from a file system</p>
<h1>Syntax</h1>
<pre>kill-snapshots  [--abort] [--check-fsa-validator] &lt;file-system&gt;
</pre>

<h1>Description</h1>
<p>kill-snapshots removes <strong>all</strong> snapshots from a file system - including those taken by and relied upon for system features (replication, migration, etc) by writing directly to the FSA bitmap and freeing all the snapshot allocations it encounters. It is not the recommended way to remove snapshots and should only be invoked in extremis.</p>
<p>kill-snapshots will leak one or more blocks with each invocation. Running kill-snapshots on a WFS-2 file system that supports dedupe will leak all snapshot blocks. fs-reclaim-leaked-space will recover most of the leaked space, but fixfs will be needed to recover all the lost blocks.</p>
<p>kill-snapshots is an asynchronous utility and will only run on a file system that is unmounted.</p>
<p>kill-snapshots will make checkpoint selection using fs-checkpoint-select temporarily unavailable.</p>
<p>snapshot-delete-all is the preferred tool for deleting all snapshots since it does not require the file system to be unmounted, does not leak space, and does not affect checkpoint selection.</p>
<p>Options:</p>
<dl>
<dt><strong>--abort, -a</strong></dt>
<dd><p>Abort an existing kill-snapshots run</p></dd>
<dt><strong>--check-fsa-validator</strong></dt>
<dd><p>Predicate the clearing of snapshots on a sanity check of the FSA bitmap</p></dd>
</dl>
<h1>Examples</h1>
<p>To remove the snapshots on file system fs0:</p>
<pre>kill-snapshots fs0
</pre>
<p></p>
<h1>Applies To</h1>
<p>EVS</p>
<h1>See Also</h1>
<p><a href="../Dev/fixfs.html">fixfs</a> <a href="../Dev/fs-reclaim-leaked-space.html">fs-reclaim-leaked-space</a> <a href="../Supervisor/snapshot-delete.html">snapshot-delete</a> <a href="../Supervisor/snapshot-delete-all.html">snapshot-delete-all</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
