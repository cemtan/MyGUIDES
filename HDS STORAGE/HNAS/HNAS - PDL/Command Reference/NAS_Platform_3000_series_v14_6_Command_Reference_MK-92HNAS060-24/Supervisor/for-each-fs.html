<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>for-each-fs</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 10:20:39 +0000 oemId: 1 -->
<h1>for-each-fs</h1>
<p>Run a command in the context of each filesystem</p>
<h1>Syntax</h1>
<pre>for-each-fs [--quiet] &lt;command&gt; [&lt;args&gt;]
</pre>

<h1>Description</h1>
<p>The for-each-fs command runs the specified command once for each file system in the current EVS. This command will not run in the context of the Admin Service. When a file system is iterated over, the $FS_LABEL environment variable is set to that file system's name. This allows for greater flexibility in executing commands which require the file system's name be passed as an argument, although care must be taken so the variable is evaluated at the right time (see EXAMPLES).</p>
<p>Options:</p>
<dl>
<dt><strong>--quiet|-q</strong></dt>
<dd><p>Don't display each file system name as commands are run.</p></dd>
</dl>
<p>ssrun -c can be useful when trying to run complicated commands.</p>
<h1>Examples</h1>
<p>Create a directory in each file system:</p>
<pre>server:$ for-each-fs mkdir foo
Executing on fs1
Executing on fs2
server:$
</pre>
<p></p>
<p>Print each file system's name:</p>
<pre>server:$ for-each-fs ssrun -c 'echo "$FS_LABEL"'
Executing on fs1
fs1
Executing on fs2
fs2
server:$
</pre>
<p></p>
<p>Run a command on each file system:</p>
<pre>server:$ for-each-fs ssrun -c 'filesystem-limits "$FS_LABEL"'
Executing on fs2
Filesystem fs2 on span server-span1:
</pre>
<p></p>
<pre>Current capacity                             18GiB
</pre>
<p></p>
<pre>Thin provision:                           disabled
</pre>
<p></p>
<pre>Free space on span allows expansion to:    2012GiB   (Run 'span-expand')
Chunk size allows growth to:              18414GiB   (This is a conservative estimate)
Largest filesystem that can be checked: 1048576GiB   (This is a hard limit)
Executing on fs1
Filesystem fs1 on span server-span1:
</pre>
<p></p>
<pre>Current capacity                             18GiB
</pre>
<p></p>
<pre>Thin provision:                           disabled
</pre>
<p></p>
<pre>Free space on span allows expansion to:    2012GiB   (Run 'span-expand')
Chunk size allows growth to:              18414GiB   (This is a conservative estimate)
Largest filesystem that can be checked: 1048576GiB   (This is a hard limit)
</pre>
<p></p>
<h1>Applies To</h1>
<p>EVS</p>
<h1>See Also</h1>
<p><a href="../User/console-context.html">console-context</a> <a href="../User/filesystem-limits.html">filesystem-limits</a> <a href="../Supervisor/for-each-evs.html">for-each-evs</a> <a href="../User/ssrun.html">ssrun</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
