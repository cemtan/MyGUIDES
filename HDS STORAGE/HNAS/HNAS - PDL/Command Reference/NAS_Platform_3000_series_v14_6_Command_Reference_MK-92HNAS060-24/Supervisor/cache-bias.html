<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>cache-bias</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 10:20:39 +0000 oemId: 1 -->
<h1>cache-bias</h1>
<p>Set bias of obj-store metadata cache for small files, large files or auto</p>
<h1>Syntax</h1>
<pre>cache-bias [--small-files | --large-files | --auto]
</pre>

<h1>Description</h1>
<p>One of the important FPGA caches within the server is the obj-store metadata cache. This particular cache can be divided between root onodes and leaf onodes. Every file in a file system requires one (and only one) root onode. Every file in a file system may also require some number of leaf onodes (the larger the file the more leaf onodes that are required).</p>
<p>An alternative is to remove the division between root onodes and leaf onodes in the cache by selecting automatic cache bias. In this mode, obj-store metadata cache pages can be used for root onodes or for leaf onodes, interchangeably, as required. However, this may result in wasting some space in the cache. Caching a root onode requires 512 bytes of cache. Caching a leaf onode requires 1024 bytes of cache. With automatic cache bias, since cache pages can be used for root onodes or leaf onodes, all cache pages are 1024 bytes long. Each root onode therefore wastes 512 bytes of cache space. However, this mode may be beneficial if the server is predominantly accessing a relatively small number of files. In this scenario (with VMware, for example), a very large number of leaf onodes need to be cached, but very few root onodes need to be cached.</p>
<p>By default the obj-store metadata cache is set to automatic cache bias. However, if the server is predominantly accessing very small files then some caching benefit may be achieved by biasing the obj-store metadata cache for small files. If the server is predominantly accessing a reasonable number of large files then some caching benefit may be achieved by biasing the obj-store metadata cache for large files.</p>
<p>The cache-bias command allows the obj-store metadata cache bias to be controlled. When invoked without any arguments the cache-bias command will display the current cache-bias setting. When invoked with either the --small-files (for a large number of small files), --large-files (for a reasonable number of large files) or --auto (for a relatively small number of files) argument then the setting is changed accordingly.</p>
<p>Note that when the setting is changed the new setting is recorded immediately (and cache-bias will then immediately report the new setting as the current setting) but the new setting will not actually take effect until the server has been rebooted.</p>
<h1>Examples</h1>
<p>To display current cache bias setting on each node in the cluster:</p>
<pre>for-each-cnode cache-bias
</pre>
<p></p>
<p>To select small files cache bias on every node in the cluster:</p>
<pre>for-each-cnode cache-bias --small-files
</pre>
<p></p>
<h1>Applies To</h1>
<p>Cluster node</p>
<h1>See Also</h1>
<p><a href="../Supervisor/for-each-cnode.html">for-each-cnode</a> <a href="../Supervisor/read-ahead.html">read-ahead</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
