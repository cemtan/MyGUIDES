<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>fs-checkpoint-select</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 10:20:39 +0000 oemId: 1 -->
<h1>fs-checkpoint-select</h1>
<p>Force the selection of a specific checkpoint of a file system</p>
<h1>Syntax</h1>
<pre>fs-checkpoint-select  [--repair] &lt;--latest | -c &lt;checkpoint-number&gt;&gt; -f &lt;file-system&gt;
</pre>

<h1>Description</h1>
<p>On WFS-2 file systems, the server stores a fixed number of historic checkpoints of the file system (see the 'dsb-count' option in the format command).</p>
<p>fs-checkpoint-select can be used to force the server to use one of these checkpoints rather than the latest checkpoint.</p>
<p>The fs-checkpoint-list command provides a list of available checkpoints that may be selected. The fs-checkpoint-health command performs various checks on these checkpoints and informs of the latest checkpoint that passes all these checks.</p>
<p>This utility may only be run on a file system that is unmounted.</p>
<p>Note: If the file system is rolled-back past a previous file system expansion, then although 'df' and 'query' will show the previous size of the file system, the underlying partition (as displayed by 'filesystem-list') will continue to report the  post-expansion size until the file system is mounted r/w when, if necessary, it will be shrunk to match the file system size.</p>
<p>Options:</p>
<dl>
<dt><strong>-c, checkpoint-number</strong></dt>
<dd><p>This option allows you to specify a particular checkpoint to select.</p></dd>
<dt><strong>-l, --latest</strong></dt>
<dd><p>This option allows you to undo a previous fs-checkpoint-select and force the selection back to the latest checkpoint.</p></dd>
<dt><strong>-r, --repair</strong></dt>
<dd><p>This option specifies that you want to repair corrupt DSBs before selecting a checkpoint. Use this if the initial attempt failed because of a corrupt DSB. The term 'repair' is used loosely, as only fixfs has the ability to fully repair a DSB. This utility 'repairs' a corrupt DSB by marking it as invalid. A subsequent DSB check will recognize that it is invalid and not complain that the DSB is corrupt.</p></dd>
</dl>
<p><strong>WARNING:</strong> Before mounting read-write, mount the file system read-only and/or run checkfs to ensure that the selected checkpoint is suitable. If not, a different checkpoint may then be selected. As soon as a selected checkpoint is mounted read-write, or fixfs is run, any later checkpoints are marked invalid and are no longer selectable.</p>
<h1>Examples</h1>
<p>To roll-back file system fs3 to checkpoint number 0x60e40:</p>
<pre>fs-checkpoint-select -c 0x60e40 -f fs3
</pre>
<p></p>
<p>To roll-back file system fs3 to checkpoint number 0x60e40, after first repairing the DSBs:</p>
<pre>fs-checkpoint-select --repair -c 0x60e40 -f fs3
</pre>
<p></p>
<p>To roll-forward to checkpoint number 0x60e42:</p>
<pre>fs-checkpoint-select -c 0x60e42 -f fs3
</pre>
<p></p>
<p>To undo any previous selections and go back to the latest checkpoint:</p>
<pre>fs-checkpoint-select --latest -f fs3
</pre>
<p></p>
<h1>Applies To</h1>
<p>EVS</p>
<h1>See Also</h1>
<p><a href="../Supervisor/fs-checkpoint-health.html">fs-checkpoint-health</a> <a href="../Supervisor/fs-checkpoint-list.html">fs-checkpoint-list</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
