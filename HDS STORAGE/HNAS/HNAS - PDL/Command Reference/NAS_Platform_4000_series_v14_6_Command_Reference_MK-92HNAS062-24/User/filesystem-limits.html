<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>filesystem-limits</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-05 07:29:14 +0000 oemId: 1 -->
<h1>filesystem-limits</h1>
<p>Show auto-expansion limits for a filesystem</p>
<h1>Syntax</h1>
<pre>filesystem-limits [&lt;filesystems-see-&#39;man fs-spec&#39;&gt;]
</pre>

<h1>Description</h1>
<p>Several factors limit the capacity to which a filesystem can auto-expand. This command lists one or more filesystems' current capacity, followed by each factor that limits auto-expansion.</p>
<p>The limiting factors are:</p>
<ul>
<li>'Filesystem is confined to': an administrator has used 'filesystem-confine' to limit the capacity to which the filesystem can auto-expand, or specified a maximum capacity when the filesystem was created.  See 'filesystem-create', 'filesystem-confine' and 'filesystem-release'.</li>
<li>'Span is confined': an administrator has used 'span-confine' to prevent auto-expansion of all filesystems on this span.  See 'span-release'.</li>
<li>'Free space on span allows expansion to': a filesystem can't use more free space than is available on the span.  To raise this limit, use 'span-expand' to expand the span, or delete other filesystems on the same span.</li>
<li>'Largest filesystem that can be checked': the server will never expand a filesystem beyond the maximum capacity at which it can be checked and fixed.  Limits that equal or exceed this value have no practical effect and may not be displayed.</li>
<li>'Chunk size allows growth to': the 'chunk' man page explains how the maximum size of a filesystem depends on the chunk size and other factors.  This line makes a very conservative estimate that each chunk run that is not yet in use will hold just one chunk.  In practice, unless you have changed the chunk-allocator's tuning, it will usually do much better than this: the number of chunks per chunk run will approximately equal the span's run bias, which can be displayed and modified via 'span-tune-allocator'.  As the filesystem grows over time, the figure shown on this line will rise.</li>
<li>'This server model allows growth to': not all server models support the same maximum filesystem size.  It is sometimes possible to upgrade a server in order to support larger filesystems.</li>
</ul>
<p>The most restrictive limits are shown first.  Therefore, limits may not appear in the same order as shown here.  In addition, some limits (such as confinement limits) may not apply at all.</p>
<p>This command also indicates whether thin provisioning (TP) is enabled for the file system and, if so, it also displays the capacity currently being reported to protocol clients.  TP affects which capacity of the file system is made visible to its protocol clients.  See 'filesystem-thin' for more details.  This is not the same as the storage-level TP described in the 'hdp' man page.</p>
<p>If the filesystem is tiered, the command shows separate limits and current capacity for each tier, because some limits, such as free space on the span, apply only to a single tier.  (Other limits, such as the absolute maximum filesystem size or the maximum number of chunks, apply to the filesystem as a whole.)</p>
<p>All filesystem auto-expansion is disabled on HDP-resident spans when 'span-hdp-preallocation no' is in force.</p>
<p>Using the flexible syntax described in the 'fs-spec' man page, you can specify any number of filesystems, either by typing their names, device IDs or volume numbers or by applying groups and filters.  In the absence of any command-line arguments, 'filesystem-list' displays limits for all loaded filesystems.</p>
<h1>Examples</h1>
<p>In the following examples, filesystem Engineering is tiered, but filesystem Accounts is not.</p>
<pre>server:$ filesystem-limits Accounts
Filesystem Accounts on span Admin:
</pre>
<p></p>
<pre>Current capacity:                          4326GiB
Thin provision:                           disabled
</pre>
<p></p>
<pre>Free space on span allows expansion to:    5820GiB   (Run 'span-expand')
Chunk size allows growth to:              36115GiB   (This is a conservative estimate)
This server model allows growth to:      131072GiB   (Upgrade the server)
Largest filesystem that can be checked: 1048576GiB   (This is a hard limit)
server:$ filesystem-limits Engineering
</pre>
<p></p>
<pre>Tier 0:
</pre>
<p></p>
<pre>Filesystem Engineering on span Depts:
</pre>
<p></p>
<pre>Current capacity on this tier                19GiB
</pre>
<p></p>
<pre>Thin provision:                           disabled
</pre>
<p></p>
<pre>Free space on span allows expansion to:      19GiB   (Run 'span-expand')
This server model allows growth to:      131072GiB   (Upgrade the server)
Chunk size allows growth to:             510549GiB   (This is a conservative estimate)
Largest filesystem that can be checked: 1048576GiB   (This is a hard limit)
</pre>
<p></p>
<pre>Tier 1:
</pre>
<p></p>
<pre>Filesystem Engineering on span Depts:
</pre>
<p></p>
<pre>Current capacity on this tier                29GiB
</pre>
<p></p>
<pre>Thin provision:                           disabled
</pre>
<p></p>
<pre>Free space on span allows expansion to:      29GiB   (Run 'span-expand')
This server model allows growth to:      131072GiB   (Upgrade the server)
Chunk size allows growth to:             510549GiB   (This is a conservative estimate)
Largest filesystem that can be checked: 1048576GiB   (This is a hard limit)
server:$
</pre>
<p></p>
<p>If the 'filesystem-thin' command has been used to enable filesystem-level thin provisioning, the command displays an extra 'Thin provision capacity' line, which shows the capacity reported to protocol clients:</p>
<pre>server:$ filesystem-limits alpha
Filesystem Alpha on span Foo:
</pre>
<p></p>
<pre>Current capacity                            749GiB
</pre>
<p></p>
<pre>Thin provision:                            enabled
Thin provision capacity:                  15000GiB
</pre>
<p></p>
<pre>Chunk size allows growth to:               2982GiB   (This is a conservative estimate)
Free space on span allows expansion to:    8192GiB   (Run 'span-expand')
Filesystem is confined to:                15000GiB   (Run 'filesystem-confine')
Largest filesystem that can be checked: 1048576GiB   (This is a hard limit)
server:$
</pre>
<p></p>
<p>If the span that hosts a filesystem is confined (i.e. all filesystem auto-expansion is disabled on the span), 'filesystem-limits' will report it:</p>
<pre>server:$ filesystem-limits alpha
Filesystem Alpha on span Foo:
</pre>
<p></p>
<pre>Current capacity                            198GiB
</pre>
<p></p>
<pre>Thin provision:                           disabled
</pre>
<p></p>
<pre>Span is confined:                           198GiB   (Run 'span-release')
Free space on span allows expansion to:    8192GiB   (Run 'span-expand')
Chunk size allows growth to:              18594GiB   (This is a conservative estimate)
Largest filesystem that can be checked: 1048576GiB   (This is a hard limit)
server:$
</pre>
<p></p>
<h1>Applies To</h1>
<p>Cluster wide</p>
<h1>See Also</h1>
<p><a href="../Supervisor/checkfs.html">checkfs</a> <a href="../Topic/chunk.html">chunk</a> <a href="../Supervisor/filesystem-confine.html">filesystem-confine</a> <a href="../Supervisor/filesystem-create.html">filesystem-create</a> <a href="../User/filesystem-list.html">filesystem-list</a> <a href="../Supervisor/filesystem-release.html">filesystem-release</a> <a href="../Supervisor/filesystem-thin.html">filesystem-thin</a> <a href="../Dev/fixfs.html">fixfs</a> <a href="../Topic/hdp.html">hdp</a> <a href="../Supervisor/span-confine.html">span-confine</a> <a href="../Supervisor/span-expand.html">span-expand</a> <a href="../Supervisor/span-hdp-preallocation.html">span-hdp-preallocation</a> <a href="../User/span-list.html">span-list</a> <a href="../Supervisor/span-release.html">span-release</a> <a href="../Supervisor/span-tune-allocator.html">span-tune-allocator</a> <a href="../Topic/tier.html">tier</a></p>
<h1>Privilege Level</h1>
<p>User</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
