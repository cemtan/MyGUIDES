<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>wfs-metadata-read-ahead</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-05 07:29:14 +0000 oemId: 1 -->
<h1>wfs-metadata-read-ahead</h1>
<p>Control WFS metadata read-ahead settings</p>
<h1>Syntax</h1>
<pre>wfs-metadata-read-ahead [+wdir|-wdir] [+wtree|-wtree]
</pre>

<h1>Description</h1>
<p>Directory operations within the VLSI file system (WFS) are handled by two FPGAs, WDIR and WTREE. WDIR manages directory name table objects and WTREE manages directory tree objects, both of which are used to perform directory operations. When part of a directory name table object or directory tree object is loaded into metadata cache (from disk) it is loaded in 2K pages. As well as loading the 2K that is required for the current operation, it is also possible to load a further 30K (ie 32K in total) into server sector cache. This latter 30K load is termed metadata read-ahead and is performed in the expectation that if part of the object is required now for the current operation then it is likely that in the very near future some other part of the object will also be required, and therefore the speculative load into sector cache may avoid the need to load from disk in the future.</p>
<p>However, in some circumstances, the benefit of the metadata read-ahead is outweighed by the additional load on the server and disks that is caused by the read-ahead.  In these circumstances it may be desirable to disable the metadata read-ahead.</p>
<p>This command allows the metadata read-ahead settings on WDIR and WTREE to be controlled. The setting is persistent across server reboots. It takes effect immediately on the pnode on which the command is executed, but only takes effect on other pnodes when they are rebooted.</p>
<h1>Examples</h1>
<p>Display current settings</p>
<pre>wfs-metadata-read-ahead
</pre>
<p></p>
<p>Enable metadata read-ahead on both WDIR and WTREE</p>
<pre>wfs-metadata-read-ahead +wdir +wtree
</pre>
<p></p>
<p>Disable metadata read-ahead on both WDIR and WTREE</p>
<pre>wfs-metadata-read-ahead -wdir -wtree
</pre>

<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
