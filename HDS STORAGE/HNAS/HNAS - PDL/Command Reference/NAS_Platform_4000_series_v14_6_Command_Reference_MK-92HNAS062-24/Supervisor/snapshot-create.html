<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>snapshot-create</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-05 07:29:14 +0000 oemId: 1 -->
<h1>snapshot-create</h1>
<p>Create a snapshot with the supplied name, or by invoking a rule.</p>
<h1>Syntax</h1>
<pre>snapshot-create (--file-system &lt;file-system&gt; &lt;snapshot-name&gt;) | (--rule &lt;rule-name&gt; [--file-system &lt;file-system&gt;])
</pre>

<h1>Description</h1>
<p>This command creates a new snapshot of a specified file system, either:</p>
<ul>
<li>With an administrator-supplied name, or</li>
<li>By invoking a snapshot rule.</li>
</ul>
<p>The file system may be identified by specifying a file system label, or a rule name.  Specifying a rule name invokes that rule to create the snapshot; if the rule name does not unambiguously identify a file system, both a rule name and a file system label may be specified.</p>
<dl>
<dt><strong>--file-system, -f &lt;file-system&gt;</strong></dt>
<dd><p>Select file system by label.</p></dd>
<dt><strong>--rule, -r &lt;rule-name&gt;</strong></dt>
<dd><p>Select rule by name.</p></dd>
</dl>
<p>Snapshots created with an administrator-supplied name are deemed <em>manually</em> created - they exist until they are explicitly deleted.  Such snapshots may be renamed.</p>
<p>Snapshots created by invoking a rule have a name of the form "&lt;timestamp&gt;.&lt;rule-name&gt;", and this name cannot be changed.  If the rule's queue is full, invoking a rule will create a new snapshot, but also delete the oldest snapshot in the queue.</p>
<p>(Regularly scheduled snapshot creation can be managed from the SMU; direct invocation of a snapshot rule from the command line is usually unnecessary.)</p>
<p>Failure conditions:</p>
<ul>
<li>SnapshotConfigInvalid or "The snapshot configuration is invalid"</li>
<p>The snapshots on the file system could not be loaded at mount-time, and are considered corrupt.</p>
<p>Resolution: Run kill-snapshots or fixfs. Both require the file system to be unmounted, and will erase all current snapshots on the file system.</p>
<li>SnapshotConfigUpdateFailure or "Failed to update the snapshot configuration" SnapshotCreationFailure or "Failed to create a snapshot"</li>
<p>The file system suffered a failure condition, perhaps due to an underlying storage error.</p>
<p>Resolution: Retry the snapshot creation when the file system has been remounted.</p>
<li>SnapshotCreationTemporarilyDisabled or "Snapshot creation could not proceed"</li>
<p>All snapshots on the file system are in the process of being deleted; this can take some time.</p>
<p>Resolution: Wait and retry. If necessary, and practicable, unmount the file system and proceed as for SnapshotConfigInvalid.</p>
<li>SnapshotMaxCountReached or "Maximum allowed number of snapshots already exist"</li>
<p>The number of snapshots on the file system, which includes those snapshots awaiting deletion, has reached the maximum allowed.</p>
<p>Resolution: Delete some snapshots, or wait for some pending deletions to complete, and retry the operation.</p>
</ul>
<h1>Examples</h1>
<pre>server:$ snapshot-create --file-system fs1 testA
 server:$ snapshot-create --rule hourly
</pre>
<p></p>
<h1>Applies To</h1>
<p>EVS</p>
<h1>See Also</h1>
<p><a href="../Supervisor/crontab.html">crontab</a> <a href="../Supervisor/snapshot-delete.html">snapshot-delete</a> <a href="../Supervisor/snapshot-delete-all.html">snapshot-delete-all</a> <a href="../User/snapshot-list.html">snapshot-list</a> <a href="../Supervisor/snapshot-rename.html">snapshot-rename</a> <a href="../User/snapshot-rule-list.html">snapshot-rule-list</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
