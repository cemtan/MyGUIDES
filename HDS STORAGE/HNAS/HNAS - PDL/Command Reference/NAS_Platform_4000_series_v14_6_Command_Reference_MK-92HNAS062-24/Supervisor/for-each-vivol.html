<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>for-each-vivol</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-05 07:29:14 +0000 oemId: 1 -->
<h1>for-each-vivol</h1>
<p>Run a command in the context of each vivol</p>
<h1>Syntax</h1>
<pre>for-each-vivol [--quiet] [-f &lt;file-system&gt;] &lt;command&gt; [&lt;args&gt;]
</pre>

<h1>Description</h1>
<p>The for-each-vivol command runs the specified command once for each vivol in the specified volume. This command will not run in the context of the Admin Service. When a vivol is iterated over, the $VIVOL_LABEL environment variable is set to that vivol's name. This allows for greater flexibility in executing commands which require the vivol's name be passed as an argument, although care must be taken so the variable is evaluated at the right time (see EXAMPLES).</p>
<p>Options:</p>
<dl>
<dt><strong>--quiet|-q</strong></dt>
<dd><p>Don't display each vivol name as commands are run.</p></dd>
<dt><strong>-f &lt;file-system&gt;</strong></dt>
<dd><p>The file system to work on. The currently selected file system is used if this option is not specified.</p></dd>
</dl>
<p>ssrun -c can be useful when trying to run complicated commands.</p>
<h1>Examples</h1>
<p>Print each vivol's name on the file system say fs:</p>
<pre>server:$ for-each-vivol -f fs ssrun -c 'echo "$VIVOL_LABEL"'
 Executing on vivol vivol1
 vivol1
 Executing on vivol vivol2
 vivol2
 server:$
</pre>
<p></p>
<p>Run a command on each vivol present on each file system:</p>
<pre>server:$ for-each-fs for-each-vivol ssrun -c 'quota list "$FS_LABEL" "$VIVOL_LABEL" '
 Executing on test111
 Executing on vivol vivol111
 Type            : Explicit
 Target          : ViVol: vivol111
 Usage           : 0 B
   Limit         : 1 PB (Hard)
   Warning       : Unset
   Critical      : Unset
   Reset         : 5% (51.2 TB)
 File Count      : 1
   Limit         : Unset
   Warning       : Unset
   Critical      : Unset
   Reset         : 5% (0)
 Generate Events : Disabled
</pre>
<p></p>
<pre>Executing on fs1
 Executing on vivol vv1
 Type            : Explicit
 Target          : ViVol: vv1
 Usage           : 0 B
   Limit         : 1 TB (Hard)
   Warning       : Unset
   Critical      : Unset
   Reset         : 5% (51.2 GB)
 File Count      : 1
   Limit         : Unset
   Warning       : Unset
   Critical      : Unset
   Reset         : 5% (0)
 Generate Events : Disabled
</pre>
<p></p>
<h1>Applies To</h1>
<p>File system</p>
<h1>See Also</h1>
<p><a href="../User/console-context.html">console-context</a> <a href="../Supervisor/for-each-fs.html">for-each-fs</a> <a href="../User/ssrun.html">ssrun</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
