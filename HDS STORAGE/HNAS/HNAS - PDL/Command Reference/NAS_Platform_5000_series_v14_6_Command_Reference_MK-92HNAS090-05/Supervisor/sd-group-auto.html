<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>sd-group-auto</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 10:21:49 +0000 oemId: 1 -->
<h1>sd-group-auto</h1>
<p>Create accurate SD groups after interrogating storage</p>
<h1>Syntax</h1>
<pre>sd-group-auto &lt;SD-device-IDs-see-&#39;man sd-spec&#39;&gt;
Alias:       asdg
</pre>

<h1>Description</h1>
<p>This command works only with Hitachi storage.  It interrogates the storage to determine the layout of parity groups and DP pools, and then sets up SD groups automatically.  If you use Hitachi storage exclusively, you will not generally need to use any of the other 'sd-group-*' commands.</p>
<p>From release 12.3 onwards, SD groups are optional unless (in contravention of best practice) a single parity group containing magnetic disks has been divided into multiple SDs.  SD groups are no longer required for</p>
<ol>
<li>DP-Vols,</li>
<li>Plain parity groups residing on flash media, or</li>
<li>Plain parity groups that contain only one LU.</li>
</ol>
<p>If SD groups already exist when 'sd-group-auto' is run, the command can often fix any configuration errors they contain.  However, if the SDs in a single parity group are members of two or more SD groups, the command will be unable to fix them: the administrator will need to delete them using 'sd-group-delete' before running 'sd-group-auto' to set them up correctly.</p>
<p>Like all similar commands, 'sd-group-auto' cannot group or ungroup SDs that are in spans that have mounted file systems.  It may therefore be necessary to unmount file systems first.  In addition, no command can set up an SD group that includes SDs in different tiers, or a mixture of tiered and untiered SDs.</p>
<p>It is necessary to specify one or more SD device IDs after the command name.  To understand the syntax, see the 'sd-spec' man page.</p>
<p>It is not necessary to specify all the SDs in a DP pool or parity group.  For example, if SDs 0 and 1 are in a parity group, the command 'sd-group-auto 0' will create a new SD group that includes both SDs.  Whilst this is convenient, because it frees the administrator from the need to know which SDs are in each parity group, it also means that the command will fail if, for example, SD 1 is in a span with a mounted file system.</p>
<h1>Examples</h1>
<p>This example shows a typical set of SD groups created by 'sd-group-auto':</p>
<pre>server:$ sd-group-list
No groups found
server:$ sd-group-auto 0-23
2 changes were made
server:$ sd-group-list -m
Serial: 0 1 2
</pre>
<p></p>
<pre>Serial: 3 4 5
</pre>
<p></p>
<pre>server:$
</pre>
<p></p>
<p>In the example above, SDs 0-2 are in a single magnetic parity group, as are SDs 3-5.  The remaining 18 SDs are of a type that requires no SD groups, and so the command does not create any for them.</p>
<p>If you have just created new SDs and you wish to auto-group them, run:</p>
<pre>sd-group-auto all:not-in-a-span
</pre>
<p></p>
<p>However, for reasons given above, this operation should rarely be necessary, because SD groups are rarely needed.  For the same reason, the command will usually not create any SD groups.</p>
<p>If you use Hitachi storage exclusively, you can correct any misconfigured SD groups by unmounting file systems and typing:</p>
<pre>sd-group-delete all:grouped
sd-group-auto all
</pre>
<p></p>
<p>Do not use this command sequence if you have any non-Hitachi storage, because the first command will delete SD groups that the second command cannot reinstate.</p>
<h1>Applies To</h1>
<p>Cluster wide</p>
<h1>See Also</h1>
<p><a href="../Topic/sd-group.html">sd-group</a> <a href="../Supervisor/sd-group-create.html">sd-group-create</a> <a href="../Supervisor/sd-group-delete.html">sd-group-delete</a> <a href="../Supervisor/sd-group-export.html">sd-group-export</a> <a href="../Supervisor/sd-group-import.html">sd-group-import</a> <a href="../User/sd-group-list.html">sd-group-list</a> <a href="../Supervisor/sd-group-remove.html">sd-group-remove</a> <a href="../Topic/sd-spec.html">sd-spec</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
