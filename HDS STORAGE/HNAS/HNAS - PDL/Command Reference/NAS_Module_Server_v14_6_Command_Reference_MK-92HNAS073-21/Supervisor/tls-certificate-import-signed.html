<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>tls-certificate-import-signed</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
  <style type="text/css">
  <!--
  @page { size: 8.27in 11.69in }
  H1  { font-family: "Verdana", sans-serif }
  H2  { font-family: "Verdana", sans-serif }
  H3  { font-family: "Verdana", sans-serif }
  H4  { font-family: "Verdana", sans-serif }
  P   { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  PRE { font-family: "Courier", monospace;  font-size: 12pt; margin-left: 40px; }
  DT  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  LI  { font-family: "Verdana", sans-serif; font-size: 11pt; margin-left: 40px; }
  -->
  </style>

</head>
<body style="background-color: white">
<!--Start header -->
<!-- html created: 2023-03-07 12:50:50 +0000 oemId: 1 -->
<h1>tls-certificate-import-signed</h1>
<p>Import a signed X.509 or PKCS#7 certificate bundle for use in authenticating the HNAS server to its clients.</p>
<h1>Syntax</h1>
<pre>tls-certificate-import-signed --path &lt;path&gt; [--confirm] [--with-private-key]
</pre>

<h1>Description</h1>
<p>The tls-certificate-import-trust-chain command is used to import single X509 certificates, in PEM or DER format, that are then combined to form a trust chain.</p>
<p>The tls-certificate-import-signed command is used to import a single CA signed X509 certificate or a PKCS#7 bundle of trust chains and a signed certificate or a CA signed certificate with a trusted chain and with a private key. These certificates must be in PEM or DER format.</p>
<p>Both commands are only available when connected to the system using ssc.</p>
<h2>Warning:</h2>
<p>Running <strong>tls-certificate-import-signed</strong> will <em>automatically</em> cause the HTTPS server used for server management to restart. Any clients currently connected to it <em>will lose their connection</em> and will need to reconnect.</p>
<p>This forces clients to connect using the new SSL/TLS certificate.</p>
<h2>Options:</h2>
<dl>
<dt><strong>--alias, -a</strong></dt>
<dd><p>[Parameter not used with "tls-certificate-import-signed"] Provide a name for the certificate. This name should be unique to each trust chain certificate imported.</p></dd>
<dt><strong>--path, -p</strong></dt>
<dd><p>Specify the path to the certificate which is in PEM or DER format.</p></dd>
<dt><strong>--confirm</strong></dt>
<dd><p>This flag must be specified for any changes to be made.</p></dd>
<dt><strong>--with-private-key</strong></dt>
<dd><p>When this flag is specified, the file must include the end-entity certificate and the private key. It may in addition include intermediate certificates that will be uploaded as a trusted chain. The only supported certificates are X509 in PEM format.</p></dd>
</dl>
<h1>Examples</h1>
<p>Initially one should generated a new private key and certificate and then generate a certificate signing request (CSR).</p>
<pre>$ tls-certificate-create-custom --confirm
$ tls-certificate-generate-csr
</pre>
<p></p>
<p>Now take the output from the CSR command and provide it to your CA. They should reply with either a certificate bundle in PKCS#7 format or a signed X509 certificate and several certificates that make up their trust chain. All these certificates need to be in PEM or DER format.</p>
<p>If you have a single PKCS#7 certificate simply import it using:</p>
<p>$ tls-certificate-import-signed --path cert.p7b --confirm</p>
<p>If you have received multiple X509 certificates then you need to import each certificate that is part of the trust chain first:</p>
<pre>$ tls-certificate-import-trust-chain --path root-ca.cer --alias root --confirm
$ tls-certificate-import-trust-chain --path intermediate-ca-1.cer --alias intermediate-1 --confirm
...
$ tls-certificate-import-trust-chain --path intermediate-ca-n.cer --alias intermediate-n --confirm
</pre>
<p></p>
<p>After the complete trust chain has been imported, you then import the signed certificate:</p>
<p>$ tls-certificate-import-signed --path cert.cer --confirm</p>
<p>In case you already have a certificate with an external private key, you don't need to generate a new signing request, instead you may catenate all your certificates, starting with the end-entity/leaf certificate, then intermediate certificates if they exist, into a single file in PEM format. Catenate the private key to this file too and then run:</p>
<pre>$ tls-certificate-import-signed --path certs_with_key.pem --confirm --with-private-key
</pre>
<p></p>
<p>It will update the private key in Bali's registry and will import the end-entity/leaf certificate and the provided trust chains. Any trust chain certificates that exist in Bali's registry prior to running this command will be removed.</p>
<h1>Applies To</h1>
<p>Cluster wide</p>
<h1>See Also</h1>
<p><a href="../Supervisor/tls-certificate-create-custom.html">tls-certificate-create-custom</a> <a href="../Supervisor/tls-certificate-generate-csr.html">tls-certificate-generate-csr</a> <a href="../Supervisor/tls-certificate-import-trust-chain.html">tls-certificate-import-trust-chain</a> <a href="../Supervisor/tls-certificate-show.html">tls-certificate-show</a></p>
<h1>Privilege Level</h1>
<p>Supervisor</p>
<blockquote></blockquote>
<!--End footer-->
</body>
</html>
